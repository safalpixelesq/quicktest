{%- set style = style | setDefaults({background:'linear-gradient(20deg, #b721ff
0%, #21d4fd 100%);',spacing:'lg', align:'left', justify: 'left'}) -%}
<section
	class="{{ style | setSection('class') }}"
	style="{{ style | setSection('style') }}"
	id="{{uid}}"
>
	<div
		class="{{ style | setContainer }} uk-text-{{style.align}} uk-flex uk-flex-{{style.justify}}"
	>
		<div
			class="uk-border-rounded uk-padding-large uk-box-shadow-large uk-section-secondary uk-text-{{style.align}} uk-flex uk-flex-{{style.justify}}"
		>
			<div class="uk-width-3-4@m">
				{%- render "@macro-texts", {heading:"2", weight:"normal",
				size:'lg',subtitle:subtitile, title: title, color:style.color,
				justify:style.justify, align:style.align } -%}
				<button
					class="uk-button uk-button-primary uk-margin-top"
					type="button"
					data-uk-toggle="target: #embedForm"
				>
					{{ctas[0].label}}
				</button>
			</div>
		</div>

		<!-- This is the modal -->
		<div id="embedForm" data-uk-modal>
			<div class="uk-modal-dialog uk-modal-body uk-border-rounded">
				<button
					class="uk-modal-close-default"
					type="button"
					data-uk-close
				></button>
				<h2 class="uk-h3">{{subtitle | safe}}</h2>
				<div>{{description | safe}}</div>
			</div>
		</div>
	</div>
</section>
<style>
	.pq-input {
		height: 48px !important;
		border-radius: 24px !important;
		padding: 0px 25px !important;
	}
</style>
<script>
	function contactForm() {
		return {
			formData: {
				name: "",
				email: "",
				message: "",
			},
			message: "",
			loading: false,
			submitted: false,
			buttonLabel: "Submit",

			submitData() {
				this.buttonLabel = "Submitting...";
				this.loading = true;
				this.message = "";

				fetch("/api/contact", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(this.formData),
				})
					.then(() => {
						this.email = "";
						this.message =
							"Thank you! We will get back to you soon.";
						this.submitted = true;
					})
					.catch(() => {
						this.message = "Ooops! Something went wrong!";
					})
					.finally(() => {
						this.loading = false;
						this.buttonLabel = "Submit";
					});
			},
		};
	}
</script>
