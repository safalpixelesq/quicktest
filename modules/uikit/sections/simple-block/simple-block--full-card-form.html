{%- set style = style | setDefaults({background:'linear-gradient(20deg, #b721ff
0%, #21d4fd 100%);',spacing:'lg', align:'left', justify: 'left'}) -%}
<section
	class="{{ style | setSection('class') }}"
	style="{{ style | setSection('style') }}"
	id="{{uid}}"
>
	<div
		class="{{ style | setContainer }} uk-text-{{style.align}} uk-flex uk-flex-{{style.justify}}"
	>
		<div
			class="uk-border-rounded uk-padding-large uk-box-shadow-large uk-section-secondary uk-text-{{style.align}} uk-flex uk-flex-{{style.justify}}"
		>
			<div class="uk-width-3-4@m">
				{%- render "@macro-texts", {heading:"2", weight:"normal",
				size:'lg',subtitle:subtitile, title: title,
				description:description, color:style.color,
				justify:style.justify, align:style.align } -%}
				<form
					action="/contact"
					method="POST"
					x-data="contactForm()"
					@submit.prevent="submitData"
				>
					<div
						class="uk-margin-medium-top uk-flex uk-flex-center uk-flex-{{style.justify}} uk-flex-column uk-flex-middle"
					>
						<div class="" x-show="!submitted">
							<input
								class="uk-input uk-width-medium uk-width-large@m pq-input"
								type="email"
								placeholder="Email Address"
								x-model="formData.email"
							/>
						</div>
						<template x-if="message">
							<h4 class="uk-margin-remove-top" x-text="message">
								Thank you! We will get back to you soon.
							</h4>
						</template>

						<button
							class="uk-button uk-flex uk-button-primary uk-margin-small-bottom uk-margin-top"
							type="submit"
							rel=""
						>
							{{ctas[0].label}}
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>
<style>
	.pq-input {
		height: 48px !important;
		border-radius: 24px !important;
		padding: 0px 25px !important;
	}
</style>
<script>
	function contactForm() {
		return {
			formData: {
				name: "",
				email: "",
				message: "",
			},
			message: "",
			loading: false,
			submitted: false,
			buttonLabel: "Submit",

			submitData() {
				this.buttonLabel = "Submitting...";
				this.loading = true;
				this.message = "";

				fetch("/api/contact", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify(this.formData),
				})
					.then(() => {
						this.email = "";
						this.message =
							"Thank you! We will get back to you soon.";
						this.submitted = true;
					})
					.catch(() => {
						this.message = "Ooops! Something went wrong!";
					})
					.finally(() => {
						this.loading = false;
						this.buttonLabel = "Submit";
					});
			},
		};
	}
</script>
